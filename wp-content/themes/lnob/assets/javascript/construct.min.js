var LNOB=LNOB||{},$=jQuery,$lnobDoc=$(document),$lnobWin=$(window),lnobIsIE11=!!window.MSInputMethodContext&&!!document.documentMode;function getQueryStringValue(key,string){void 0===string&&(string=window.location.search),key=key.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var regex,results=new RegExp("[\\?&]"+key+"=([^&#]*)").exec(string);return null===results?"":decodeURIComponent(results[1].replace(/\+/g," "))}function commaSeparateNumber(val){for(;/(\d+)(\d{3})/.test(val.toString());)val=val.toString().replace(/(\d+)(\d{3})/,"$1,$2");return val}LNOB.intervalScroll={init:function(){didScroll=!1,$lnobWin.on("scroll load",(function(){didScroll=!0})),setInterval((function(){didScroll&&(didScroll=!1,$lnobWin.trigger("did-interval-scroll"))}),250)}},LNOB.resizeEnd={init:function(){var resizeTimer;$lnobWin.on("resize",(function(e){clearTimeout(resizeTimer),resizeTimer=setTimeout((function(){$lnobWin.trigger("resize-end")}),250)}))}},LNOB.isScrolling={init:function(){scrollPos=0,directionBuffer=50;var $body=$("body");$lnobWin.on("did-interval-scroll",(function(){var currentScrollPos=$lnobWin.scrollTop(),scrollLockPos=$("html").attr("scrollock-position"),docHeight=$body.outerHeight(),winHeight=$lnobWin.outerHeight();scrollLockPos&&(currentScrollPos=scrollLockPos),currentScrollPos>0?$body.addClass("is-scrolling"):$body.removeClass("is-scrolling"),currentScrollPos>$lnobWin.outerHeight()?$body.addClass("scrolled-screen-height"):$body.removeClass("scrolled-screen-height"),currentScrollPos+winHeight>=docHeight?$body.addClass("scrolled-to-bottom"):$body.removeClass("scrolled-to-bottom"),currentScrollPos>$lnobWin.outerHeight()/3?Math.abs(scrollPos-currentScrollPos)>=directionBuffer&&(currentScrollPos>scrollPos?$("body").addClass("scrolling-down").removeClass("scrolling-up"):$("body").addClass("scrolling-up").removeClass("scrolling-down")):$("body").removeClass("scrolling-up scrolling-down"),scrollPos=currentScrollPos}))}},LNOB.toggles={init:function(){LNOB.toggles.toggle(),LNOB.toggles.resizeCheck(),LNOB.toggles.untoggleOnEscapeKeyPress(),LNOB.toggles.untoggleOnOutsideClick()},toggle:function(){$lnobDoc.on("click","*[data-toggle-target]",(function(e){var $toggle=$(this),targetString=$(this).data("toggle-target");if("next"==targetString)var $target=$toggle.next();else var $target=$(targetString);var classToToggle=$toggle.data("class-to-toggle")?$toggle.data("class-to-toggle"):"active";if("slidetoggle"==$toggle.data("toggle-type")){var duration=$toggle.data("toggle-duration")?$toggle.data("toggle-duration"):250;$target.slideToggle(duration)}else"toggle"==$toggle.data("toggle-type")?$target.toggle():$target.toggleClass(classToToggle);if("next"==targetString?$toggle.toggleClass("active"):$('*[data-toggle-target="'+targetString+'"]').toggleClass("active"),$toggle.data("toggle-body-class")&&$("body").toggleClass($toggle.data("toggle-body-class")),$toggle.data("lock-scroll")?LNOB.scrollLock.setTo(!0):$toggle.data("unlock-scroll")?LNOB.scrollLock.setTo(!1):$toggle.data("toggle-scroll-lock")&&LNOB.scrollLock.setTo(),$toggle.data("set-focus")){var $focusElement=$($toggle.data("set-focus"));$focusElement.length&&($toggle.is(".active")?$focusElement.focus():$focusElement.blur())}return $target.trigger("toggled"),$toggle.hasClass("active")?$target.trigger("toggled-active"):$target.trigger("toggled-inactive"),!1}))},resizeCheck:function(){$("*[data-untoggle-above], *[data-untoggle-below], *[data-toggle-above], *[data-toggle-below]").length&&$lnobWin.on("resize",(function(){var winWidth=$lnobWin.width(),$toggles;$(".toggle").each((function(){$toggle=$(this);var unToggleAbove=$toggle.data("untoggle-above"),unToggleBelow=$toggle.data("untoggle-below"),toggleAbove=$toggle.data("toggle-above"),toggleBelow=$toggle.data("toggle-below");(unToggleAbove||unToggleBelow||toggleAbove||toggleBelow)&&((unToggleAbove&&winWidth>unToggleAbove||unToggleBelow&&winWidth<unToggleBelow)&&$toggle.hasClass("active")||(toggleAbove&&winWidth>toggleAbove||toggleBelow&&winWidth<toggleBelow)&&!$toggle.hasClass("active"))&&$toggle.trigger("click")}))}))},untoggleOnEscapeKeyPress:function(){$lnobDoc.keyup((function(e){"Escape"===e.key&&$("*[data-untoggle-on-escape].active").each((function(){$(this).hasClass("active")&&$(this).trigger("click")}))}))},untoggleOnOutsideClick:function(){$lnobDoc.on("click",(function(e){var $clickTarget=$(e.target),$toggles;$("*[data-untoggle-on-outside-click].active").each((function(){var $toggle=$(this),$toggleTarget=$($toggle.attr("data-toggle-target"));$clickTarget.is($toggle)||$clickTarget.parents().is($toggle)||$clickTarget.is($toggleTarget)||$clickTarget.parents().is($toggleTarget)||$toggle.trigger("click")}))}))}},LNOB.coverModals={init:function(){$(".cover-modal").length&&LNOB.coverModals.showOnLoadAndClick()},showOnLoadAndClick:function(){var key="modal";if(-1!==window.location.search.indexOf(key)){var modalID=getQueryStringValue(key);LNOB.coverModals.toggleModal(modalID)}$lnobDoc.on("click","a",(function(){if($(this).attr("href")&&-1!==$(this).attr("href").indexOf(key)){var modalID=getQueryStringValue(key,$(this).attr("href"));return LNOB.coverModals.toggleModal(modalID),!1}})),$lnobDoc.on(".cover-modal","toggled-inactive",(function(){$lnobWin.trigger("did-interval-scroll")}))},toggleModal:function(modalID){var modalTargetStr="#"+modalID,$modalTarget=$(modalTargetStr);if(modalID&&$modalTarget.length){var $modalToggles=$('*[data-toggle-target="'+modalTargetStr+'"]');$modalToggles.length&&$modalToggles.first().trigger("click")}}},LNOB.elementInView={init:function(){$targets=$(".do-spot"),LNOB.elementInView.run($targets),$lnobWin.on("ajax-content-loaded",(function(){$targets=$(".do-spot"),LNOB.elementInView.run($targets)}))},run:function($targets){$targets.length&&($targets.each((function(){$(this).addClass("will-be-spotted")})),LNOB.elementInView.handleFocus($targets),$lnobWin.on("load resize orientationchange did-interval-scroll",(function(){LNOB.elementInView.handleFocus($targets)})))},handleFocus:function($targets){$targets.each((function(){var $this=$(this);LNOB.elementInView.isVisible($this,checkAbove=!0)&&$this.addClass("spotted").trigger("spotted")}))},isVisible:function($elem,checkAbove){void 0===checkAbove&&(checkAbove=!0);var winHeight=$lnobWin.height(),docViewTop,docViewBottom=$lnobWin.scrollTop()+winHeight,docViewLimit=docViewBottom,elemTop=$elem.offset().top,elemTransform=window.getComputedStyle($elem[0]).getPropertyValue("transform");if(elemTransform&&!lnobIsIE11){var elemTransformMatrix=new WebKitCSSMatrix(elemTransform);elemTransformMatrix&&(elemTranslateY=elemTransformMatrix.m42,elemTranslateY&&(elemTop-=elemTranslateY))}return!!(checkAbove&&elemTop<=docViewBottom)||docViewLimit>=elemTop}},LNOB.smoothScroll={init:function(){$('a[href*="#"]').not('[href="#"]').not('[href="#0"]').not(".disable-hash-scroll").on("click",(function(e){if(location.pathname.replace(/^\//,"")==this.pathname.replace(/^\//,"")&&location.hostname==this.hostname){$target=$(this.hash).length?$(this.hash):$("[name="+this.hash.slice(1)+"]");var updateHistory="true"==$(this).attr("data-update-history");LNOB.smoothScroll.scrollToTarget($target,$(this),updateHistory),e.preventDefault()}})),$lnobDoc.on("click","*[data-scroll-to]",(function(e){var $target=$($(this).data("scroll-to")),updateHistory="true"==$(this).attr("data-update-history");LNOB.smoothScroll.scrollToTarget($target,$(this),updateHistory),e.preventDefault()}))},scrollToTarget:function($target,$clickElem=null,updateHistory){if($target.length){var additionalOffset=0,scrollSpeed=500;$clickElem&&$clickElem.length&&(additionalOffset=$clickElem.data("additional-offset")?$clickElem.data("additional-offset"):0,scrollSpeed=$clickElem.data("scroll-speed")?$clickElem.data("scroll-speed"):500),$clickElem&&$clickElem.closest(".cover-modal")&&LNOB.coverModals.toggleModal($clickElem.closest(".cover-modal").attr("id"));var originalOffset,scrollOffset=$target.offset().top+additionalOffset;if(updateHistory){var hash=$target.attr("id")?"#"+$target.attr("id"):"";hash&&history.replaceState({},"",hash)}LNOB.smoothScroll.scrollToPosition(scrollOffset,scrollSpeed)}},scrollToPosition:function(scrollOffset,scrollSpeed=500){$("html, body").animate({scrollTop:scrollOffset},scrollSpeed,(function(){$lnobWin.trigger("did-interval-scroll")}))}},LNOB.scrollLock={init:function(){window.scrollLocked=!1,window.prevScroll={scrollLeft:$lnobWin.scrollLeft(),scrollTop:$lnobWin.scrollTop()},window.prevLockStyles={},window.lockStyles={"overflow-y":"scroll",position:"fixed",width:"100%"},LNOB.scrollLock.saveStyles()},saveStyles:function(){var styleAttr=$("html").attr("style"),styleStrs=[],styleHash={};styleAttr&&(styleStrs=styleAttr.split(/;\s/),$.each(styleStrs,(function serializeStyleProp(styleString){if(styleString){var keyValue=styleString.split(/\s:\s/);keyValue.length<2||(styleHash[keyValue[0]]=keyValue[1])}})),$.extend(prevLockStyles,styleHash))},lock:function(){var appliedLock={};scrollLocked||(prevScroll={scrollLeft:$lnobWin.scrollLeft(),scrollTop:$lnobWin.scrollTop()},LNOB.scrollLock.saveStyles(),$.extend(appliedLock,lockStyles,{left:-prevScroll.scrollLeft+"px",top:-prevScroll.scrollTop+"px"}),$("html").css(appliedLock).addClass("scroll-locked"),$("html").attr("scrollock-position",prevScroll.scrollTop),$lnobWin.scrollLeft(0).scrollTop(0),scrollLocked=!0)},unlock:function(){scrollLocked&&($("html").attr("style",$("<x>").css(prevLockStyles).attr("style")||""),$("html").removeClass("scroll-locked").removeAttr("scrollock-position"),$lnobWin.scrollLeft(prevScroll.scrollLeft).scrollTop(prevScroll.scrollTop),scrollLocked=!1)},setTo:function(on){arguments.length?on?LNOB.scrollLock.lock():LNOB.scrollLock.unlock():scrollLocked?LNOB.scrollLock.unlock():LNOB.scrollLock.lock()}},LNOB.focusManagement={init:function(){LNOB.focusManagement.focusLoops()},focusLoops:function(){$lnobDoc.keydown((function(e){var $focusElement=$(":focus"),$focusLoop=$focusElement.closest(".focus-loop"),$destination=!1;if(9==e.keyCode&&$focusLoop.length){var $focusable=$focusLoop.find('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])').filter(":visible"),$focusableFirst=$focusable.first(),$focusableLast=$focusable.last();if(e.shiftKey?$focusElement.is($focusableFirst)&&($destination=$focusableLast):$focusElement.is($focusableLast)&&($destination=$focusableFirst),$destination)return $destination.focus(),!1}}))}},LNOB.dynamicScreenHeight={init:function(){var $screenHeight=$(".screen-height");$screenHeight.css("min-height",$lnobWin.innerHeight()),setTimeout((function(){$screenHeight.css("min-height",$lnobWin.innerHeight())}),500),$lnobWin.on("resize orientationchange",(function(){$screenHeight.css("min-height",$lnobWin.innerHeight())}))}},LNOB.frontPage={init:function(){LNOB.frontPage.lnobSymbol(),LNOB.frontPage.gg(),LNOB.frontPage.mainMenu(),LNOB.frontPage.footnotes(),LNOB.frontPage.pullQuote()},lnobSymbol:function(){var degrees=360*Math.random()+0;$(".lnob-symbol-inner").css({transform:"rotate("+degrees+"deg)"}),$(".lnob-symbol").addClass("do-spot"),$lnobWin.trigger("ajax-content-loaded")},gg:function(){$(".gg-content").on("toggled-active",(function(){$(this).closest(".gg").addClass("showing-content"),$lnobWin.trigger("resize"),LNOB.smoothScroll.scrollToTarget($($(this)))})),$(".gg-content").on("toggled-inactive",(function(){$(this).closest(".gg").removeClass("showing-content"),$lnobWin.trigger("resize");var ggOffset=$(".global-goals").offset().top,currentIndex=$(this).closest(".gg").index();$(".global-goals .gg").each((function(){$(this).index()<currentIndex&&(ggOffset+=$(this).outerHeight())})),LNOB.smoothScroll.scrollToPosition(ggOffset)}))},mainMenu:function(){$lnobDoc.on("mouseenter focus",".menu-gg-grid a",(function(){$(".menu-gg-grid a").addClass("not-hover"),$(this).removeClass("not-hover")})),$lnobDoc.on("mouseleave blur",".menu-gg-grid",(function(){$(".menu-gg-grid a").removeClass("not-hover")}))},footnotes:function(){$(".footnotes-button").on("click",(function(){$(this).add($(this).closest(".gg").find(".footnotes-box-wrapper")).toggleClass("active")})),$lnobDoc.on("click",".footnote-identifier-link",(function(){var $gg=$(this).closest(".gg"),$footnotesBox=$gg.find(".footnotes-box-wrapper"),$footnotesButton=$gg.find(".footnotes-button");return $footnotesBox.add($footnotesButton).addClass("active"),LNOB.smoothScroll.scrollToTarget($footnotesBox,$(this)),!1}))},pullQuote:function(){$(".wp-block-pullquote blockquote").each((function(){$(this).prepend('<svg fill="none" height="90" viewBox="0 0 128 90" width="128" xmlns="http://www.w3.org/2000/svg"><g fill="#e5243b"><path d="m25.858 57.1973c-14.514-1.4113-25.858-13.6462-25.858-28.5307 0-15.8321 12.8345-28.6666 28.6666-28.6666 15.4835 0 28.1 12.2756 28.648 27.6254.8398 13.9425-4.6097 44.5845-42.2484 61.0211-8.50382 3.7136-15.473915-9.4876-6.7187-14.6183 5.4389-3.1873 14.7079-10.0411 17.5105-16.8309z"/><path d="m96.4657 57.1973c-14.5139-1.4113-25.858-13.6462-25.858-28.5307 0-15.8321 12.8345-28.6666 28.6666-28.6666 15.4837 0 28.0997 12.2756 28.6477 27.6254.84 13.9425-4.609 44.5845-42.248 61.0211-8.5039 3.7136-15.474-9.4876-6.7188-14.6183 5.4389-3.1873 14.708-10.0411 17.5105-16.8309z"/></g></svg>')}))}},LNOB.countUp={init:function(){$(".count-up").each((function(){var countValue=$(this).text().replace(",","");countValue.indexOf(".")>=0||$.isNumeric(countValue)&&($(this).attr("data-count-value",countValue.replace(/[^0-9]/g,"")),$(this).css("width",$(this).outerWidth()),$(this).text("0"))})),$lnobWin.on("resize-end",(function(){$(".count-up").css("width","auto")})),$(".count-up").closest(".do-spot").on("spotted",(function(){var $countElem=$(this).find(".count-up"),countValue=$countElem.attr("data-count-value"),countDuration=$countElem.data("count-duration")?$countElem.data("count-duration"):1e3;countValue&&($countElem.hasClass("started-count")||($countElem.addClass("started-count"),$({countNum:"0"}).animate({countNum:countValue},{duration:countDuration,easing:"linear",step:function(){$countElem.text(commaSeparateNumber(Math.floor(this.countNum)))},complete:function(){$countElem.text(commaSeparateNumber(countValue)),$countElem.addClass("counted")}})))}))}},$lnobDoc.ready((function(){LNOB.intervalScroll.init(),LNOB.resizeEnd.init(),LNOB.isScrolling.init(),LNOB.scrollLock.init(),LNOB.toggles.init(),LNOB.coverModals.init(),LNOB.elementInView.init(),LNOB.smoothScroll.init(),LNOB.focusManagement.init(),LNOB.frontPage.init(),LNOB.dynamicScreenHeight.init(),LNOB.countUp.init()}));
//# sourceMappingURL=construct.min.js.map